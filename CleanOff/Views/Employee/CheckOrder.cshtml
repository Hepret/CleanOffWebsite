@using Microsoft.AspNetCore.Server.Kestrel.Core
@model CleanOff.Domain.Order

@{
    ViewBag.Title = "Проверка заказа";
    Layout = "_EmployeePanelLayout";
}

<div class="container">
    <h1 class="mt-4">Подтверждение заказа</h1>

    <div class="mt-4">
        <h2>Информация о заказе:</h2>
        <h3>Номер заказа: @Model.OrderId</h3>
        <h3>Описание заказа:</h3>
        <p>@Model.Description</p>

        @if (Model.Address != null)
        {
            <h3>Адрес: @Model.Address</h3>
        }
    </div>

    <div class="mt-4">
        <h2>Информация о клиенте</h2>
        <h3>Имя: @Model.Client.Name</h3>
        <h3>Фамилия: @Model.Client.Surname</h3>
        <h3>Номер: @Model.Client.Phone</h3>
    </div>

    <div class="mt-4">
        <label for="price">Цена заказа:</label>
        <input type="number" name="price" id="price" class="form-control">
        <button type="button" id="confirmOrderBtn" class="btn btn-primary mt-3">Подтвердить</button>
    </div>

    <script>
        const confirmBtn = document.getElementById("confirmOrderBtn");
        confirmBtn.addEventListener('click', () => {
            const price = document.getElementById("price").value;
            fetch(`/employee/order/check/confirm?orderId=@Model.OrderId&price=${price}`, {
                method: 'GET',
            }).then(response => response.text())
                .catch(error => console.log(error));
        })
    </script>

    <div class="mt-4">
        <button class="btn btn-primary"><a href="/employee/order/check/updateAndConfirm?orderId=@Model.OrderId" class="text-white">Изменить</a></button>
        <button type="button" class="btn btn-danger"><a href="/employee/order/check/reject?orderId=@Model.OrderId" class="text-white">Удалить</a></button>
    </div>
</div>